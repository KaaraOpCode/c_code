<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/></head><body>unsigned short kp&nbsp; = 0;<br><br>// Keypad module connections<br>char&nbsp; keypadPort at PORTD;<br>// End Keypad module connections<br><br>// LCD module connections<br>sbit LCD_RS at RB4_bit;<br>sbit LCD_EN at RB5_bit;<br>sbit LCD_D4 at RB0_bit;<br>sbit LCD_D5 at RB1_bit;<br>sbit LCD_D6 at RB2_bit;<br>sbit LCD_D7 at RB3_bit;<br><br>sbit LCD_RS_Direction at TRISB4_bit;<br>sbit LCD_EN_Direction at TRISB5_bit;<br>sbit LCD_D4_Direction at TRISB0_bit;<br>sbit LCD_D5_Direction at TRISB1_bit;<br>sbit LCD_D6_Direction at TRISB2_bit;<br>sbit LCD_D7_Direction at TRISB3_bit;<br>// End LCD module connections<br><br>int keyPad(){<br>// Wait for key to be pressed and released<br>&nbsp;&nbsp;&nbsp; do<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // kp = Keypad_Key_Press();&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // Store key code in kp variable<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; kp = Keypad_Key_Click();&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // Store key code in kp variable<br>&nbsp;&nbsp;&nbsp; while (!kp);<br>&nbsp;&nbsp; // Prepare value for output, transform key to it's ASCII value<br>&nbsp;&nbsp;&nbsp; switch (kp) {<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; case&nbsp; 1: return 55; break; // 7&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // Uncomment this block for keypad4x4<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; case&nbsp; 2: return 56; break; // 8<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; case&nbsp; 3: return 57; break; // 9<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; case&nbsp; 4: return 65; break; // A<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; case&nbsp; 5: return 52; break; // 4<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; case&nbsp; 6: return 53; break; // 5<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; case&nbsp; 7: return 54; break; // 6<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; case&nbsp; 8: return 66; break; // B<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; case&nbsp; 9: return 49; break; // 1<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; case 10: return 50; break; // 2<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; case 11: return 51; break; // 3<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; case 12: return 67; break; // C<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; case 13: return 42; break; // *<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; case 14: return 48; break; // 0<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; case 15: return 35; break; // #<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; case 16: return 68; break; // D<br><br>&nbsp;&nbsp;&nbsp; }<br>}<br><br>char str[10]={'\0','\0','\0','\0','\0','\0','\0','\0','\0','\0'};<br>char lcdNums[10]={48,49,50,51,52,53,54,55,56,57};<br>char segNums[10]={0x3F,0x06,0x5B,0x4F,0x66,0x6D,0x7D,0x07,0x7F,0x6F};<br>int i=0;<br>int cnt=0;<br>char nums[2];<br>void main() {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // Reset counter<br>&nbsp; Keypad_Init();&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // Initialize Keypad<br>&nbsp; ANSEL&nbsp; = 0;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // Configure AN pins as digital I/O<br>&nbsp; ANSELH = 0;<br>&nbsp; Lcd_Init();&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // Initialize LCD<br>&nbsp; Lcd_Cmd(_LCD_CLEAR);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // Clear display<br>&nbsp; Lcd_Cmd(_LCD_CURSOR_OFF);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // Cursor off<br>&nbsp; TRISC=0X00;<br>&nbsp; PORTC=0x00;<br>//&nbsp; LCD_OUT(1,1,"WIRTING");<br> while(1){<br><br> while(cnt&lt;sizeof(nums)){<br> char kp1= keyPad();<br> nums[cnt]=kp1;<br> LCD_CHR(1,1,kp1);<br> cnt++;<br> }<br> if((nums[0]==56 &amp;&amp; nums[1]==57)<br>&nbsp;&nbsp; || (nums[0]==57 &amp;&amp; nums[1]==56)<br> ){<br>&nbsp;&nbsp;&nbsp; LCD_OUT(1,1,"ZEC &amp; ALUTEYI:");<br>&nbsp;&nbsp; if(i&gt;3)<br>&nbsp;&nbsp;&nbsp; i=0;<br>&nbsp; // max 3<br>&nbsp;&nbsp; if(i&gt;=0 &amp;&amp; i&lt;=3){<br>&nbsp;&nbsp; delay_ms(<a href="tel:500">500</a>);<br>&nbsp;&nbsp; LCD_CHR(1,15,lcdNums[i]);<br>&nbsp;&nbsp; portc=segNums[i];<br>&nbsp;&nbsp; }<br>&nbsp;&nbsp; <br><br> }<br>&nbsp; else if((nums[0]==53 &amp;&amp; nums[1]==56)<br>&nbsp;&nbsp; || (nums[0]==56 &amp;&amp; nums[1]==53)<br> ){<br>&nbsp;&nbsp;&nbsp; LCD_OUT(1,1,"Dao &amp; ZEC:");<br>&nbsp; if(i&gt;5 )<br>&nbsp;&nbsp; {i=3;}<br>&nbsp; // max 3<br>&nbsp;&nbsp; if(i&gt;=3 &amp;&amp; i&lt;=5){<br>&nbsp;&nbsp; delay_ms(<a href="tel:500">500</a>);<br>&nbsp;&nbsp; LCD_CHR(1,15,lcdNums[i]);<br>&nbsp;&nbsp; portc=segNums[i];<br>&nbsp;&nbsp; }<br> }<br> <br>&nbsp; else if((nums[0]==57 &amp;&amp; nums[1]==53)<br>&nbsp;&nbsp; || (nums[0]==53 &amp;&amp; nums[1]==57)<br> ){<br>&nbsp; LCD_OUT(1,1,"ALUTEYI &amp; DA0");<br>&nbsp;&nbsp;&nbsp; if(i&lt;6 || i&gt;8){<br>&nbsp;&nbsp;&nbsp; i=6;<br>&nbsp;&nbsp;&nbsp; }<br><br>&nbsp;&nbsp; else{<br>&nbsp;&nbsp; delay_ms(<a href="tel:500">500</a>);<br>&nbsp;&nbsp; LCD_CHR(1,15,lcdNums[i]);<br>&nbsp;&nbsp; portc=segNums[i];<br>&nbsp;&nbsp; }<br> }<br> else if((nums[0]==54 &amp;&amp; nums[1]==56)<br>&nbsp;&nbsp; || (nums[0]==54 &amp;&amp; nums[1]==56)<br> ){<br>&nbsp; LCD_OUT(1,1,"BAULU &amp; ZEC");<br>&nbsp;&nbsp;&nbsp; if(i&lt;7 || i&gt;9){<br>&nbsp;&nbsp;&nbsp; i=6;<br>&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp; if(i&gt;=7 &amp;&amp; i&lt;=8){<br>&nbsp;&nbsp; delay_ms(<a href="tel:500">500</a>);<br>&nbsp;&nbsp; LCD_CHR(1,15,lcdNums[i]);<br>&nbsp;&nbsp; portc=segNums[i];<br>&nbsp;&nbsp; }<br> }<br>i++;<br>}<br>}</body></html>